# ğŸ§ª æ¸¬è©¦æª”æ¡ˆèªªæ˜

æœ¬è³‡æ–™å¤¾åŒ…å«å°ˆæ¡ˆçš„æ¸¬è©¦è…³æœ¬ï¼Œç”¨æ–¼é©—è­‰å„é …åŠŸèƒ½æ˜¯å¦æ­£å¸¸é‹ä½œã€‚

---

## ğŸ“‹ æ¸¬è©¦æª”æ¡ˆæ¸…å–®

### **æ ¸å¿ƒåŠŸèƒ½æ¸¬è©¦**

#### `test-kpi-only.ts` â­ **æœ€é‡è¦**
- **ç›®çš„**: æ¸¬è©¦ KPI Calculator çµ±ä¸€é‹ç®—ä¸­å¿ƒ
- **æ¸¬è©¦å…§å®¹**:
  - æ‰€æœ‰ KPI è¨ˆç®—é‚è¼¯
  - Formula Engine å‹•æ…‹å…¬å¼é‹ç®—
  - æ•¸æ“šæ­£ç¢ºæ€§é©—è­‰
- **åŸ·è¡Œ**: `npx tsx tests/test-kpi-only.ts`
- **é æœŸçµæœ**: æ‰€æœ‰ KPI è¨ˆç®—æ­£ç¢ºï¼Œç„¡ NaN æˆ–ç•°å¸¸å€¼

#### `test-full-flow.ts`
- **ç›®çš„**: ç«¯åˆ°ç«¯å®Œæ•´æµç¨‹æ¸¬è©¦
- **æ¸¬è©¦å…§å®¹**:
  - Supabase é€£ç·š
  - è³‡æ–™åŒæ­¥ï¼ˆGoogle Sheets â†’ Supabaseï¼‰
  - KPI è¨ˆç®—
  - AI å»ºè­°ç”Ÿæˆ
- **åŸ·è¡Œ**: `npx tsx tests/test-full-flow.ts`
- **å‰ç½®æ¢ä»¶**: éœ€è¨­å®š Supabase ç’°å¢ƒè®Šæ•¸

---

### **è³‡æ–™åŒæ­¥æ¸¬è©¦**

#### `test-seed-and-sync.ts`
- **ç›®çš„**: æ¸¬è©¦æ¸¬è©¦è³‡æ–™å»ºç«‹èˆ‡åŒæ­¥
- **æ¸¬è©¦å…§å®¹**:
  - å»ºç«‹ mock spreadsheet
  - åŒæ­¥åˆ° Supabase
  - é©—è­‰è³‡æ–™å®Œæ•´æ€§
- **åŸ·è¡Œ**: `npx tsx tests/test-seed-and-sync.ts`

#### `test-sync-validation.ts`
- **ç›®çš„**: é©—è­‰è³‡æ–™åŒæ­¥æ­£ç¢ºæ€§
- **æ¸¬è©¦å…§å®¹**:
  - æª¢æŸ¥è³‡æ–™ç­†æ•¸
  - é©—è­‰æ¬„ä½å°æ‡‰
  - ç¢ºèªæ™‚é–“æˆ³è¨˜
- **åŸ·è¡Œ**: `npx tsx tests/test-sync-validation.ts`

---

### **æœå‹™å±¤æ¸¬è©¦**

#### `test-total-report-service.ts`
- **ç›®çš„**: æ¸¬è©¦æ•¸æ“šç¸½å ±è¡¨æœå‹™
- **æ¸¬è©¦å…§å®¹**:
  - å ±è¡¨ç”¢ç”Ÿé‚è¼¯
  - è³‡æ–™èšåˆ
  - AI å»ºè­°ç”Ÿæˆ
- **åŸ·è¡Œ**: `npx tsx tests/test-total-report-service.ts`

---

### **ç’°å¢ƒæª¢æŸ¥**

#### `test-env-check.ts`
- **ç›®çš„**: æª¢æŸ¥ç’°å¢ƒè®Šæ•¸è¨­å®š
- **æ¸¬è©¦å…§å®¹**:
  - Supabase é€£ç·šè¨­å®š
  - Google Sheets æ†‘è­‰
  - å…¶ä»–å¿…è¦ç’°å¢ƒè®Šæ•¸
- **åŸ·è¡Œ**: `npx tsx tests/test-env-check.ts`

---

## ğŸš€ å¿«é€Ÿæ¸¬è©¦æŒ‡ä»¤

```bash
# æ¸¬è©¦ KPI Calculatorï¼ˆæœ€å¸¸ç”¨ï¼‰
npx tsx tests/test-kpi-only.ts

# æ¸¬è©¦å®Œæ•´æµç¨‹ï¼ˆéœ€è¦ Supabaseï¼‰
npx tsx tests/test-full-flow.ts

# æª¢æŸ¥ç’°å¢ƒè¨­å®š
npx tsx tests/test-env-check.ts
```

---

## âœ… æ¸¬è©¦é€šéæ¨™æº–

æ‰€æœ‰æ¸¬è©¦æ‡‰è©²ï¼š
- âœ… ç„¡ TypeScript ç·¨è­¯éŒ¯èª¤
- âœ… ç„¡é‹è¡Œæ™‚éŒ¯èª¤
- âœ… æ‰€æœ‰æ•¸å€¼åˆç†ä¸”é NaN
- âœ… è³‡æ–™ç­†æ•¸ç¬¦åˆé æœŸ
- âœ… é¡¯ç¤ºã€Œæ¸¬è©¦é€šéã€è¨Šæ¯

---

## ğŸ“ æ–°å¢æ¸¬è©¦

ç•¶æ–°å¢åŠŸèƒ½æ™‚ï¼Œå»ºè­°åœ¨æ­¤è³‡æ–™å¤¾å»ºç«‹å°æ‡‰çš„æ¸¬è©¦æª”æ¡ˆï¼š

```bash
# ç¯„ä¾‹ï¼šæ–°å¢ teacher-report æ¸¬è©¦
tests/test-teacher-report.ts
```

æ¸¬è©¦æª”æ¡ˆå‘½åè¦å‰‡ï¼š`test-{åŠŸèƒ½åç¨±}.ts`
