# 🚀 電訪系統驗收指南

**更新時間**: 2025-10-22 21:45
**狀態**: ✅ 代碼已提交到本地，等待部署

---

## ⚠️ 重要提示

由於本地環境 npm cache 有權限問題，無法直接啟動開發伺服器。
你有兩個選擇：

---

## 方案 A: 部署到 Zeabur（推薦）

### 步驟 1: 推送代碼到 GitHub

```bash
# 在終端機執行
cd /Users/hsepherd/Documents/singple-ai-system

# 推送到 GitHub（需要你的 GitHub 認證）
git push origin main
```

### 步驟 2: 等待 Zeabur 自動部署

Zeabur 會自動偵測 GitHub 的新 commit 並重新部署。

部署完成後（約 3-5 分鐘），前往你的線上網址：
- `https://singple-ai-system.zeabur.app`（或你的實際網址）

### 步驟 3: 驗收電訪系統

1. **登入系統**
   - Email: `xk4kx4563022@gmail.com`
   - 密碼: `Fff1359746!`

2. **進入電訪系統**
   - 左側選單 → **電訪系統**
   - 點擊 → **學生跟進** ✨（新功能！）

3. **測試功能**
   - 查看統計卡片
   - 點擊「撥打」按鈕測試通話記錄
   - 點擊「分配教師」測試教師分配

---

## 方案 B: 修復本地環境（需要權限）

### 步驟 1: 修復 npm cache 權限

```bash
# 選項 1: 修復權限（推薦）
sudo chown -R $(whoami) ~/.npm

# 或選項 2: 清除 cache
npm cache clean --force

# 或選項 3: 使用新的 cache 路徑
npm config set cache ~/.npm-cache --global
```

### 步驟 2: 安裝依賴

```bash
cd /Users/hsepherd/Documents/singple-ai-system
npm install
```

### 步驟 3: 啟動開發伺服器

```bash
npm run dev
```

### 步驟 4: 開啟瀏覽器

- 前往：`http://localhost:5000`
- 登入並測試

---

## 📋 完整驗收測試清單

詳細的測試項目請參考：[TELEMARKETING_ACCEPTANCE_TEST.md](TELEMARKETING_ACCEPTANCE_TEST.md:1)

### 快速驗收（5 分鐘）

#### 1. 頁面載入測試
- [ ] 能看到「學生跟進管理」標題
- [ ] 6 個統計卡片顯示數字
- [ ] 學生列表有資料並按優先級排序

#### 2. 撥打電話測試
- [ ] 點擊任一學生的「撥打」按鈕
- [ ] 對話框彈出並顯示學生資訊
- [ ] 選擇「已接通」→「有意願」→「高意願」
- [ ] 填寫備註
- [ ] 點擊「儲存記錄」→ 成功

#### 3. 分配教師測試
- [ ] 找到「未分配」的學生
- [ ] 點擊「分配教師」
- [ ] 看到教師列表和推薦標記
- [ ] 選擇教師並確認分配

#### 4. 篩選功能測試
- [ ] 點擊「今日待辦」→ 只顯示高優先學生
- [ ] 在搜尋框輸入學生名字 → 正確過濾
- [ ] 點擊「清除篩選」→ 恢復全部

---

## 🎯 驗收重點

### 必須通過的項目

1. **頁面正常載入** ✅
   - 沒有白屏或錯誤訊息
   - 統計數字正確顯示

2. **撥打電話功能** ✅
   - 對話框正常開啟
   - 表單可以填寫
   - 儲存後有成功訊息

3. **分配教師功能** ✅
   - 可以看到教師列表
   - 有智能推薦標記
   - 可以選擇並分配

4. **資料篩選** ✅
   - 快速篩選按鈕有效
   - 搜尋功能正常
   - 下拉篩選正確

### 可接受的問題

以下問題不影響驗收通過：

1. **分配教師 API 可能未完成**
   - 對話框可以開啟
   - 教師列表可以顯示
   - 但分配後可能顯示錯誤（因為後端 API 待建立）
   - 👉 這是 Phase 3 的工作

2. **電話號碼可能為空**
   - 如果資料庫中沒有電話資料
   - 會顯示「-」或空白
   - 👉 需要從 Google Sheets 同步資料

3. **學生資料可能較少**
   - 取決於資料庫中的體驗課購買記錄
   - 至少要有 3-5 筆資料才能測試排序

---

## 🐛 如果遇到問題

### 問題 1: 看不到「學生跟進」選單

**可能原因**:
- 代碼尚未部署到線上
- 需要先 push 到 GitHub

**解決方法**:
```bash
git push origin main
```
然後等待 Zeabur 重新部署

---

### 問題 2: 頁面載入很慢或無資料

**可能原因**:
- 資料庫查詢較慢
- 沒有體驗課購買記錄

**解決方法**:
1. 確認儀表板的「體驗課報表」有資料
2. 如果沒有，需要先從 Google Sheets 同步資料

---

### 問題 3: API 錯誤

**可能原因**:
- 後端 API 尚未部署
- 環境變數未設定

**解決方法**:
1. 確認 Zeabur 的環境變數已設定
2. 檢查 Supabase 連線正常
3. 查看 Zeabur 的部署日誌

---

### 問題 4: 本地環境無法啟動

**錯誤訊息**: `EACCES: permission denied`

**解決方法**:
```bash
# 方法 1: 修復權限
sudo chown -R $(whoami) ~/.npm

# 方法 2: 使用其他 package manager
brew install pnpm
pnpm install
pnpm dev

# 方法 3: 直接在 Zeabur 上驗收
git push origin main
```

---

## 📊 驗收標準

### ✅ 驗收通過標準

- Phase 1 功能至少 80% 可用
- Phase 2 對話框可以開啟並操作
- 沒有嚴重的 UI 錯誤或崩潰
- 基本的篩選和搜尋功能正常

### ⭐ 優秀標準

- Phase 1 功能 100% 正常
- Phase 2 對話框完全可用
- 資料刷新即時
- 所有篩選功能正常
- UI 流暢無延遲

---

## 📞 需要協助

如果驗收過程中遇到任何問題：

1. **記錄錯誤訊息**
   - 截圖或複製錯誤訊息
   - 記錄操作步驟

2. **檢查瀏覽器 Console**
   - 按 F12 開啟開發者工具
   - 查看 Console 標籤的錯誤

3. **告訴我問題**
   - 描述發生了什麼
   - 預期應該怎樣
   - 我會立即協助修復

---

## 🎉 驗收完成後

如果驗收通過：

1. **回饋意見**
   - 哪些功能最實用
   - 哪些需要調整
   - 有沒有其他需求

2. **下一步規劃**
   - Phase 3 進階功能（可選）
   - 其他系統優化
   - 新功能開發

---

## 📝 快速指令參考

```bash
# 推送代碼到 GitHub
git push origin main

# 修復 npm 權限
sudo chown -R $(whoami) ~/.npm

# 安裝依賴
npm install

# 啟動開發伺服器
npm run dev

# 查看 Git 狀態
git status

# 查看最新 commit
git log --oneline -5
```

---

## 🎯 總結

**最簡單的驗收方式**:

1. 執行 `git push origin main`
2. 等待 Zeabur 部署完成（3-5 分鐘）
3. 前往線上網址登入
4. 測試「電訪系統 → 學生跟進」功能

**預計驗收時間**: 10-15 分鐘

**驗收成功指標**: 能看到學生跟進頁面，能開啟對話框並操作

---

**祝驗收順利！** 🎉

有任何問題隨時告訴我！
